{% extends 'layout.html' %}
{% load static %}

{% block title %}
    比赛控制
{% endblock %}

{% block style %}
    <link rel="stylesheet" href="{% static 'bootstrap/bootstrap.min.css' %}">
    <style>
        .container {
            margin-top: 10px !important;
            padding-left: 0 !important;
            padding-right: 0 !important;
        }

        .row {
            margin-right: 0 !important;
            margin-left: 0 !important;
            padding-left: 15px !important;
            padding-right: 15px !important;
        }

        .race_control .card {
            width: 100%;
            margin-top: 15px !important;
        }

        .card-title {
            margin-bottom: 0 !important;
        }
    </style>
{% endblock %}

{% block scripts %}
    <script src="{% static 'jquery/jquery.min.js' %}"></script>
    <script src="{% static 'bootstrap/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/referee.js' %}"></script>
{% endblock %}

{% block content %}
    <div class="container">

        <!-- 比赛控制 -->
        <div class="race_control">
            <div class="row">
                <div class="card" id="race_control">
                    <div class="card-header">
                        <h4 class="card-title">比赛控制</h4>
                    </div>
                    <div class="card-body">
                        <button onclick="raceManager.exchangeTeams()" class="btn btn-primary">换场</button>
                        <button onclick="raceManager.clearAllScore()" class="btn btn-primary">清除比分</button>
                        <a href="/admin">
                            <button class="btn btn-primary">比赛设置</button>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 计时器控制 -->
        <div class="race_control">
            <div class="row">
                <div class="card" id="race_control" style="">
                    <div class="card-header">
                        <h4 class="card-title" id="timerDisplay">计时器控制</h4>
                    </div>
                    <div class="card-body">
                        <button onclick="raceManager.start_timer()" class="btn btn-primary" id="timer_start">开始</button>
                        <button onclick="raceManager.pause_resume_timer()" class="btn btn-primary disabled" id="timer_pause">停止/恢复</button>
                        <button onclick="raceManager.reset_timer()" class="btn btn-primary" id="timer_reset">重置</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- team1 比分 -->
        <div class="race_control">
            <div class="row">
                <div class="card" id="race_control" style="">
                    <div class="card-header">
                        <h4 class="card-title" id="team1_score">team1 score</h4>
                    </div>
                    <div class="card-body">
                        <button onclick="raceManager.changeTeam1Score(-1)" class="btn btn-primary">-</button>
                        <button onclick="raceManager.changeTeam1Score(1)" class="btn btn-primary">+</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="race_control">
            <div class="row">
                <div class="card" id="race_control" style="">
                    <div class="card-header">
                        <h4 class="card-title" id="team1_total_score">team1 total score</h4>
                    </div>
                    <div class="card-body">
                        <button onclick="raceManager.changeTeam1TotalScore(-1)" class="btn btn-primary">-</button>
                        <button onclick="raceManager.changeTeam1TotalScore(1)" class="btn btn-primary">+</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- team2 比分 -->
        <div class="race_control">
            <div class="row">
                <div class="card" id="race_control" style="">
                    <div class="card-header">
                        <h4 class="card-title" id="team2_score">team2 score</h4>
                    </div>
                    <div class="card-body">
                        <button onclick="raceManager.changeTeam2Score(-1)" class="btn btn-primary">-</button>
                        <button onclick="raceManager.changeTeam2Score(1)" class="btn btn-primary">+</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="race_control">
            <div class="row">
                <div class="card" id="race_control" style="">
                    <div class="card-header">
                        <h4 class="card-title" id="team2_total_score">team2 total score</h4>
                    </div>
                    <div class="card-body">
                        <button onclick="raceManager.changeTeam2TotalScore(-1)" class="btn btn-primary">-</button>
                        <button onclick="raceManager.changeTeam2TotalScore(1)" class="btn btn-primary">+</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 数据手动同步 -->
        <div class="race_control">
            <div class="row">
                <div class="card" id="race_control" style="">
                    <div class="card-header">
                        <h4 class="card-title">数据库同步</h4>
                    </div>
                    <div class="card-body">
                        <button onclick="raceManager.fetchRaceInfo()" class="btn btn-primary">Sync from</button>
                        <button onclick="raceManager.sendRaceInfo()" class="btn btn-primary">Sync to</button>
                    </div>
                </div>
            </div>
        </div>
            
    
    </div>

{% endblock %}
